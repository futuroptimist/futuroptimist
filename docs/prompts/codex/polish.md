### Futuroptimist — Polish Plan

This doc contains two runnable prompts for OpenAI Codex.

---

## Section 1 — **Polish Prompt (one-click, evergreen)**

~~~md
# Futuroptimist — Polish Prompt (One-Click, Evergreen)

You are operating on the repository: **futuroptimist/futuroptimist**.

**Mission**
Perform a holistic polish pass that improves structure, clarity, maintainability, and contributor experience **without changing runtime behavior**. Treat this as a phase-2 refinement used after `implement.md` starts to saturate (low orthogonality among variants). The work must be **idempotent** and **small, readable** in a single PR.

**Constraints**
- Keep public interfaces and CI behavior stable.
- Prefer **moving/renaming** and documentation over rewrites.
- Preserve the existing `uv` + `Makefile` + `npm` workflows; update docs/scripts to reflect reality instead of swapping toolchains.
- No hard-coding of ephemeral data (timestamps, SHAs).
- If something is uncertain, propose the change in the PR description instead of forcing it.

**Deliverables (single PR on branch `codex/polish-docs-map`)**
1) **Repo Snapshot (autogenerated in the PR description)**
   - Enumerate primary languages and key directories in this repo (`src/`, `video_scripts/`, `docs/`, `scripts/`, `tests/`, `outages/`, `data/prompt-docs/`, `.github/workflows/`).
   - Note presence of `README`, `INSTRUCTIONS`, `RUNBOOK`, `CONTRIBUTING`, `CODE_OF_CONDUCT`, `LICENSE`, `Makefile`, `requirements.txt`, `package.json`, `.pre-commit-config.yaml`, coverage config, and CI workflows.
   - Detect Python dependency management (`uv` + `requirements.txt`) and Node tooling; summarize how tests/coverage run in CI.
   - List prompt docs currently present under `docs/prompts/codex/`.

2) **Prompt-doc maintenance**
   - Ensure `docs/prompts/codex/` exists and only contains canonical filenames (e.g., `automation.md`, `implement.md`, `polish.md`, `spellcheck.md`, `agents.md`, `playbook.md`, `video-script-ideas.md`).
   - Run or update `scripts/migrate-prompt-docs.sh` so stray prompt files move/rename safely; re-runs must print the "already consolidated" message and make no changes.
   - Refresh `docs/README.md` (and any inbound links) if files were moved, added, or removed.
   - Avoid touching unchanged prompts; prefer renames/moves over content rewrites.

3) **Entry map & layout clarity**
   - Keep the README "Map of the repo" section current: highlight the three-hop Setup → Run → Test guidance and ensure table rows match actual directories (e.g., `src/`, `scripts/`, `video_scripts/`, `data/prompt-docs/`, `docs/`, `tests/`, `outages/`, `.github/workflows/`).
   - Link newcomers to `INSTRUCTIONS.md`, `RUNBOOK.md`, and the prompt index within three clicks.
   - Reduce root clutter only when renames improve clarity; do not introduce empty placeholder folders.

4) **Config, tooling & DX**
   - Document `uv` flows (`uv sync`, `uv run pytest --cov=./src --cov=./tests`, `uvx <tool>`), `make` helpers (`make setup`, `make test`, `make fmt`), and the npm scripts (`npm run lint`, `npm run format:check`, `npm run test:ci`) that CI executes.
   - Ensure `.pre-commit-config.yaml` hooks (ruff, black, codespell, lychee, outage validator, secret scan, heatmap) are referenced in docs so contributors know what fires locally.
   - Keep coverage expectations visible (Codecov badge, thresholds) and align docs with workflows `01-lint-format.yml`, `02-tests.yml`, and `03-docs.yml`.
   - If additional DX helpers are added, document them in `docs/README.md` rather than bloating the main README.

5) **Testing & safety nets**
   - Confirm contributors can run the full suite via one command (`make test` or `uv run pytest --cov=./src --cov=./tests`).
   - Provide or reference smoke coverage for major CLI entry points; if a new helper is added, include a dry-run flag and document it.
   - Keep formatting workflows (`make fmt`, pre-commit) idempotent and documented.

6) **Orthogonality & saturation tracker**
   - Append or update `docs/prompt-saturation-rubric.md` with checkpoints for collisions/overlap that justify switching from `implement.md` to this polish prompt.
   - Maintain the checkbox list so re-running the prompt simply appends observations without reordering existing entries.

**File edits to stage**
- `docs/prompts/codex/polish.md` (this file; limit changes to Section 1 for this run).
- Prompt doc renames/moves into `docs/prompts/codex/` (if required).
- `docs/README.md` (prompt index & migration helper usage) and `README.md` (Map of the repo) when updates are needed.
- `scripts/migrate-prompt-docs.sh` only when logic or messaging changes to stay idempotent.

**PR contents & formatting**
- Branch: `codex/polish-docs-map`
- Title: `chore: polish docs + map (idempotent)`
- Body:
  - Repo Snapshot (bullets)
  - What changed (moves/renames; doc tweaks; no runtime impact)
  - How to test locally (`make test`, `uv run pytest ...`, lint commands if touched)
  - Idempotency notes (e.g., migration script re-run output)

**Success criteria**
- CI workflows (lint, tests, docs) stay green.
- Re-running this prompt causes **no diff**.
- All prompt docs live under `docs/prompts/codex/` with canonical naming and an up-to-date index.
- README provides a clear entry map aligned with actual directories and setup/run/test flow.

> Execute now. If any step is ambiguous, propose the minimal, reversible change and note it in the PR body.
~~~

---

## Section 2 — **Upgrade Prompt (to refine Section 1 over time)**

~~~md
# Futuroptimist — Upgrade Prompt for Section 1

You are operating on the repository: **futuroptimist/futuroptimist**.

**Goal**
Evolve the **Section 1 “Polish Prompt”** above to reflect new conventions, tools, or lessons learned—**without** breaking idempotency or expanding scope beyond polish.

**What to do**
1) **Read** the current Section 1 codeblock verbatim.
2) **Diagnose gaps**:
   - Are layout recommendations aligned with actual repo usage?
   - Do CI/pre-commit steps match what the repo runs today (e.g., `uv`, coverage, link/spell checks)?
   - Are rename/move rules for prompt docs complete and conflict-free?
   - Are README and docs “entry maps” concise and sufficient?
3) **Propose precise edits** to Section 1 language to:
   - Clarify actions that caused reviewer confusion.
   - Tighten idempotency (avoid churny lines; normalize whitespace/ordering where needed).
   - Add/trim steps to keep the prompt under a single PR with small, readable diffs.
4) **Do not** expand into feature work; stay within structure/docs/tests polish.

**Output**
- A **redlined diff** (or exact replacement text) for the Section 1 codeblock.
- A brief rationale list (bullets) summarizing why each change improves clarity or idempotency.

**Constraints**
- Keep the one-click nature and small PR footprint intact.
- Maintain repository interface and CI invariants.

> Produce the updated Section 1 content ready to paste back into this file, then summarize rationale.
~~~
